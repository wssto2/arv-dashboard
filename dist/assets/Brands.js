import{d as C,r as x,P as B,m as N,z as d,f as a,G as f,o as p,e as o,c as b,h as g,t as z,B as U,g as s,b as j,F,i as I,w as S}from"./vendor.js";import{u as D,_ as O,a as A,b as E}from"./StatusLabel.vue_vue_type_script_setup_true_lang.js";import{b as K,_ as q}from"./index.js";import{_ as G}from"./Modal.vue_vue_type_script_setup_true_lang.js";import{u as H,_ as w,a as L,b as R}from"./CheckboxField.vue_vue_type_script_setup_true_lang.js";import"./useFetch.js";const T={class:"field-list-group"},P={class:"field-list-group-item"},W={class:"field-list-group-item"},Z={class:"field-list-group"},J={class:"field-list-group-item"},Q={class:"field-list-group-item"},X={class:"flex flex-1 items-center justify-end"},Y={key:0,class:"flex-1"},ee={class:"text-grey-500"},te={class:"text-grey-800"},ae=C({__name:"BrandModal",props:{categoryId:{}},emits:["save"],setup(V,{expose:y,emit:k}){const m=V,c=k,_=x(),e=H({category_id:m.categoryId});console.log(e),B(()=>m.categoryId,()=>{e.originalData.value.category_id=m.categoryId,e.data.value.category_id=m.categoryId});const v=x();function h(r){var t,u;e.reset(),(t=_.value)==null||t.showModal(),(u=v.value)==null||u.focus(),r&&r>0&&e.fetch(`/definitions/brands/${r}`)}y({showModal:h,hideModal:()=>{var r;return(r=_.value)==null?void 0:r.hideModal()}});async function n(){let r="/definitions/brands";e.exists()&&(r+=`/${e.getKey()}`),await e.submit({endpoint:r,method:e.exists()?"put":"post"}),c("save")}return(r,t)=>{const u=f("custom-button");return p(),N(G,{ref_key:"modal",ref:_,width:800,"dark-body":!0,processing:a(e).processing.value},{header:d(()=>t[4]||(t[4]=[o("h4",{class:"text-bold no-margin"},"Unos / uređivanje marke",-1)])),footer:d(()=>{var l,i;return[o("div",X,[a(e).exists()?(p(),b("div",Y,[o("small",ee,[t[7]||(t[7]=g("Zadnja izmjena: ")),o("span",te,z(a(K)((l=a(e).data.value)==null?void 0:l.updated_at)),1)])])):U("",!0),s(u,{onClick:(i=_.value)==null?void 0:i.hideModal,class:"mr-10"},{default:d(()=>t[8]||(t[8]=[g("Odustani")])),_:1},8,["onClick"]),s(u,{disabled:a(e).processing.value,appearance:"primary","icon-before":"save",onClick:n,"keyboard-shortcut":{key:"S",ctrlKey:!0}},{default:d(()=>t[9]||(t[9]=[g("Spremi")])),_:1},8,["disabled"])])]}),default:d(()=>[s(a(R),{processing:a(e).processing.value,horizontal:!0,error:a(e).processingError.value,onSubmit:n},{default:d(()=>[t[5]||(t[5]=o("h6",{class:"text-bold mt-20"},"Osnovne informacije",-1)),o("ul",T,[o("li",P,[s(w,{ref_key:"firstFormField",ref:v,label:"Naziv",required:!0,modelValue:a(e).data.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>a(e).data.value.name=l),error:a(e).errors.first("name")},null,8,["modelValue","error"])]),o("li",W,[s(L,{label:"Aktivno",modelValue:a(e).data.value.active,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).data.value.active=l)},null,8,["modelValue"])])]),t[6]||(t[6]=o("h6",{class:"text-bold mt-20"},"Dodatne informacije",-1)),o("ul",Z,[o("li",J,[s(w,{label:"Shared ID",numeric:"",description:"Oznaka marke u Hrvatskoj bazi",required:!0,modelValue:a(e).data.value.shared_id,"onUpdate:modelValue":t[2]||(t[2]=l=>a(e).data.value.shared_id=l),modelModifiers:{number:!0},error:a(e).errors.first("shared_id")},null,8,["modelValue","error"])]),o("li",Q,[s(w,{label:"Eurotax ID",numeric:"",description:"Oznaka marke u Eurotax bazi",modelValue:a(e).data.value.eurotax_id,"onUpdate:modelValue":t[3]||(t[3]=l=>a(e).data.value.eurotax_id=l),modelModifiers:{number:!0},error:a(e).errors.first("eurotax_id")},null,8,["modelValue","error"])])])]),_:1},8,["processing","error"])]),_:1},8,["processing"])}}}),oe={class:"content"},se={class:"text-right hidden-xs"},ie={class:"text-center"},le={class:"hidden-xs"},re={class:"hidden-xs"},ne={class:"text-nowrap"},de=["onClick"],ue={href:"#",class:"text-danger"},M="indigo",he=C({__name:"Brands",setup(V){const y={id:{label:"ID",width:50,orderable:!0,align:"right",hideOnMobile:!0},name:{label:"Name",orderable:!0,orderBy:"naziv"},active:{label:"Status",width:150,align:"center"},created_at:{label:"Created At",width:250,hideOnMobile:!0},updated_at:{label:"Updated At",width:250,hideOnMobile:!0}},k=[{key:"personal",label:"Osobna vozila"},{key:"commercial",label:"Gospodarska vozila"}],m=[{key:"status",icon:"shieldStarFill",label:"Status",type:"select",options:[{label:"Aktivno",value:1},{label:"Neaktivno",value:2}]},{key:"updated_at",icon:"calendarEventFill",label:"Nedavno uređeno",type:"select",options:[{label:"Aktivno",value:1},{label:"Neaktivno",value:2}]}],c=D().withURL("definitions/brands").withColumns(y).withViews(k).withFilters(m).orderBy("name","asc"),_=[{name:"Administracija"},{name:"Unos vozila"},{name:"Marke",route:{name:"administration.definitions.brands"}}],e=x();function v(h){var n;(n=e.value)==null||n.showModal(h)}return j(()=>{c.fetch()}),(h,n)=>{const r=f("create-button"),t=f("view-header"),u=f("timestamp"),l=f("icon");return p(),b("div",oe,[s(q,{items:_,class:"mb-20","with-home":!0}),s(t,{title:"Brands",description:"Here you can manage brands of vehicles that are used when creating new vehicles.",icon:"carWashing",accent:M},{actions:d(()=>{var i;return[s(r,{onClick:(i=e.value)==null?void 0:i.showModal,"keyboard-shortcut":{key:"N",ctrlKey:!0}},{default:d(()=>n[1]||(n[1]=[g("Dodaj marku")])),_:1},8,["onClick"])]}),_:1}),s(a(E),{collection:a(c),"with-actions":!0,"row-height":53},{default:d(()=>[o("tbody",null,[(p(!0),b(F,null,I(a(c).items(),i=>(p(),b("tr",{key:i.id},[o("td",se,z(i.id),1),o("td",null,[s(a(O),{route:{name:"administration.definitions.models",params:{categoryId:i.category_id,brandId:i.id}},title:i.name,"with-decoration":!0,accent:M},null,8,["route","title"])]),o("td",ie,[s(A,{modelValue:i.active,"onUpdate:modelValue":$=>i.active=$},null,8,["modelValue","onUpdate:modelValue"])]),o("td",le,[s(u,{date:i.created_at},null,8,["date"])]),o("td",re,[s(u,{date:i.updated_at},null,8,["date"])]),o("td",ne,[o("a",{href:"#",class:"mr-20",onClick:S($=>v(i.id),["prevent"])},[s(l,{icon:"edit"})],8,de),o("a",ue,[s(l,{icon:"delete"})])])]))),128))])]),_:1},8,["collection"]),s(ae,{ref_key:"brandModal",ref:e,"category-id":a(c).activeView.value==="commercial"?2:1,onSave:n[0]||(n[0]=i=>a(c).fetch())},null,8,["category-id"])])}}});export{he as default};
