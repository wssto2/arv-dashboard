import{H as I,O as n,r as O,d as ee,j as $,o as U,m as W,z as q,e as o,g as d,f as v,k as oe,v as le,h as g,c as R,i as L,t as re,F as Z,u as se,b as ne,G as Y,q as Q}from"./vendor.js";import{_ as M,u as ie,a as X,b as ue}from"./CheckboxField.vue_vue_type_script_setup_true_lang.js";import{u as F,_ as K}from"./useFetch.js";import{_ as f}from"./SelectField.vue_vue_type_script_setup_true_lang.js";import{u as te,j as S}from"./index.js";const T=te(),ae=I("entry",()=>{const V=n([{value:1,label:"Eurotax baza"},{value:2,label:"Broj šasije"},{value:3,label:"E-kod"},{value:4,label:"Ručni unos"}]),h=n([]);for(let p=1;p<=12;p++)h.value.push({value:p,label:p});const E=n([]);for(let p=new Date().getFullYear();p>=1900;p--)E.value.push({value:p,label:p});const e=n([{value:10,label:"Osobni automobili"},{value:30,label:"Teretna vozila do 3.5t"}]),_=n([]),s=n([]),y=n([]),i=n([]),w=n([]),k=n(null),B=n([]),C=O(!1),b=O(!1),r=O(!1),c=O(!1),t=O(!1),l=O(!1),a=O(!1);return{entryTypes:V,firstRegistrationMonths:h,firstRegistrationYears:E,arvBrands:_,arvModels:s,eurotaxCategories:e,eurotaxBrands:y,eurotaxModels:i,eurotaxVersions:w,eurotaxVersion:k,eurotaxEquipment:B,isFetchingArvBrands:C,isFetchingArvModels:b,isFetchingEurotaxBrands:r,isFetchingEurotaxModels:c,isFetchingEurotaxVersions:t,isFetchingEurotaxVersion:l,isFetchingEurotaxEquipment:a,fetchEurotaxBrands:async p=>{r.value=!0;const j=S(T.apiBaseUrl,"eurotax/brands"),{data:u,error:m}=await F(j).post({category_id:p}).json();if(m.value){console.error(m.value),r.value=!1;return}y.value=u.value||[],r.value=!1},fetchEurotaxModels:async(p,j,u,m)=>{c.value=!0;const H=S(T.apiBaseUrl,"eurotax/models"),{data:D,error:P}=await F(H).post({category_id:p,first_registration_month:j,first_registration_year:u,brand_id:m}).json();if(P.value){console.error(P.value),c.value=!1;return}i.value=D.value||[],c.value=!1},fetchEurotaxVersions:async(p,j,u,m,H)=>{t.value=!0;const D=S(T.apiBaseUrl,"eurotax/versions"),{data:P,error:J}=await F(D).post({category_id:p,first_registration_month:j,first_registration_year:u,brand_id:m,model_id:H}).json();if(J.value){console.error(J.value),t.value=!1;return}w.value=P.value||[],t.value=!1},fetchEurotaxVersion:async p=>{l.value=!0;const j=S(T.apiBaseUrl,"eurotax/versions",p.toString()),{data:u,error:m}=await F(j).get().json();if(m.value){console.error(m.value),l.value=!1;return}k.value=u.value||[],l.value=!1},fetchEurotaxEquipment:async p=>{a.value=!0;const j=S(T.apiBaseUrl,"eurotax/versions",p.toString(),"equipment"),{data:u,error:m}=await F(j).get().json();if(m.value){console.error(m.value),a.value=!1;return}B.value=u.value||[],a.value=!1}}}),de={class:"row"},ce={class:"col-md-4"},ve={class:"col-md-4"},pe={class:"row"},_e={class:"col-md-6"},me={class:"col-md-6"},be={class:"col-md-4"},ge={class:"table-responsive",style:{marginLeft:"-20px",marginRight:"-20px",marginBottom:"-20px"}},fe={class:"table table-condensed table-striped table-hover"},xe=["id","onClick"],je=["for"],ye=ee({__name:"EntryPanel",props:{subject:{}},emits:["eurotaxVersionChanged"],setup(V,{expose:h,emit:E}){const e=V,_=E,s=ae(),y=$(()=>e.subject.data.value.etx_category_id>0&&e.subject.data.value.first_registration_month>0&&e.subject.data.value.first_registration_year>0),i=$(()=>e.subject.data.value.etx_category_id>0&&e.subject.data.value.etx_brand_id>0&&e.subject.data.value.first_registration_month>0&&e.subject.data.value.first_registration_year>0);function w(){e.subject.data.value.etx_brand_id=0,e.subject.data.value.etx_model_id=0,e.subject.data.value.etx_version_id=0,s.eurotaxBrands=[],s.eurotaxModels=[],s.eurotaxVersions=[];const{entry_type_id:c,etx_category_id:t,first_registration_month:l,first_registration_year:a}=e.subject.data.value;c===1&&t>0&&l>0&&a>0&&s.fetchEurotaxBrands(t)}function k(){e.subject.data.value.etx_brand_id=0,e.subject.data.value.etx_model_id=0,e.subject.data.value.etx_version_id=0,s.eurotaxBrands=[],s.eurotaxModels=[],s.eurotaxVersions=[];const{entry_type_id:c,etx_category_id:t,first_registration_month:l,first_registration_year:a}=e.subject.data.value;c===1&&t>0&&l>0&&a>0&&s.fetchEurotaxBrands(t)}function B(){e.subject.data.value.etx_brand_id=0,e.subject.data.value.etx_model_id=0,e.subject.data.value.etx_version_id=0,s.eurotaxBrands=[],s.eurotaxModels=[],s.eurotaxVersions=[];const{entry_type_id:c,etx_category_id:t,first_registration_month:l,first_registration_year:a}=e.subject.data.value;c===1&&t>0&&l>0&&a>0&&s.fetchEurotaxBrands(t)}function C(){e.subject.data.value.etx_model_id=0,e.subject.data.value.etx_version_id=0,s.eurotaxModels=[],s.eurotaxVersions=[];const{entry_type_id:c,etx_category_id:t,etx_brand_id:l,first_registration_month:a,first_registration_year:x}=e.subject.data.value;c===1&&t>0&&l>0&&a>0&&x>0&&s.fetchEurotaxModels(t,a,x,l)}function b(){e.subject.data.value.etx_version_id=0,s.eurotaxVersions=[];const{entry_type_id:c,etx_category_id:t,etx_brand_id:l,etx_model_id:a,first_registration_month:x,first_registration_year:z}=e.subject.data.value;c===1&&t>0&&l>0&&a>0&&x>0&&z>0&&s.fetchEurotaxVersions(t,x,z,l,a)}function r(c){e.subject.data.value.etx_version_id=c.id,s.fetchEurotaxVersion(c.id),s.fetchEurotaxEquipment(c.id),_("eurotaxVersionChanged",c)}return h({eurotaxVersion:$(()=>s.eurotaxVersion)}),(c,t)=>(U(),W(K,{title:"Unos vozila"},{default:q(()=>[t[13]||(t[13]=o("div",{class:"bg-info-100 text-info-900 px-5 py-3 rounded-lg mb-6"},[o("p",{class:"text-bold"},"Eurotax kriteriji za procjenu vozila:"),o("ul",null,[o("li",null,"datum prve registracije može biti +/- 6 mjeseci od perioda kad se verzija tog vozila prodavala u RH"),o("li",null,"datum prve registracije mora biti unutar tekuće godine otkad se verzija počela / završila prodavati u RH"),o("li",null,"minimalni broj prijeđenih kilometra za procjenu vozila je 5.000 km"),o("li",null,"vozilo za koje želite napraviti procjenu nesmije biti starije od 24 godine")])],-1)),o("div",de,[o("div",ce,[d(f,{label:"Unos vozila prema",modelValue:e.subject.data.value.entry_type_id,"onUpdate:modelValue":t[0]||(t[0]=l=>e.subject.data.value.entry_type_id=l),error:e.subject.errors.first("entry_type_id"),options:v(s).entryTypes,required:"","without-default-option":!0},null,8,["modelValue","error","options"]),d(f,{label:"Kategorija vozila",modelValue:e.subject.data.value.etx_category_id,"onUpdate:modelValue":[t[1]||(t[1]=l=>e.subject.data.value.etx_category_id=l),w],error:e.subject.errors.first("etx_category_id"),options:v(s).eurotaxCategories,"without-default-option":!0,required:""},null,8,["modelValue","error","options"])]),o("div",ve,[d(M,{label:"Broj šasije",modelValue:e.subject.data.value.vin,"onUpdate:modelValue":t[2]||(t[2]=l=>e.subject.data.value.vin=l),error:e.subject.errors.first("entry_vin"),placeholder:"VF15RBF0A58387756",required:""},null,8,["modelValue","error"]),o("div",pe,[o("div",_e,[d(f,{label:"Mjesec prve registracije",modelValue:e.subject.data.value.first_registration_month,"onUpdate:modelValue":[t[3]||(t[3]=l=>e.subject.data.value.first_registration_month=l),k],error:e.subject.errors.first("first_registration_month"),options:v(s).firstRegistrationMonths,required:""},null,8,["modelValue","error","options"])]),o("div",me,[d(f,{label:"Godina prve registracije",modelValue:e.subject.data.value.first_registration_year,"onUpdate:modelValue":[t[4]||(t[4]=l=>e.subject.data.value.first_registration_year=l),B],error:e.subject.errors.first("first_registration_year"),options:v(s).firstRegistrationYears,required:""},null,8,["modelValue","error","options"])])]),d(M,{label:"Prijeđeni kilometri",modelValue:e.subject.data.value.mileage,"onUpdate:modelValue":t[5]||(t[5]=l=>e.subject.data.value.mileage=l),error:e.subject.errors.first("mileage"),required:"",numeric:!0,"addon-right":"km",placeholder:"1.000"},null,8,["modelValue","error"])]),o("div",be,[oe(o("div",null,[d(f,{label:"Marka",modelValue:e.subject.data.value.etx_brand_id,"onUpdate:modelValue":[t[6]||(t[6]=l=>e.subject.data.value.etx_brand_id=l),C],error:e.subject.errors.first("etx_brand_id"),options:v(s).eurotaxBrands,"options-label":"name","options-value":"id",required:"",disabled:!y.value,processing:v(s).isFetchingEurotaxBrands},null,8,["modelValue","error","options","disabled","processing"]),d(f,{label:"Model",modelValue:e.subject.data.value.etx_model_id,"onUpdate:modelValue":[t[7]||(t[7]=l=>e.subject.data.value.etx_model_id=l),b],error:e.subject.errors.first("etx_model_id"),options:v(s).eurotaxModels,"options-label":"name","options-value":"id",required:"",disabled:!i.value,processing:v(s).isFetchingEurotaxModels},null,8,["modelValue","error","options","disabled","processing"])],512),[[le,e.subject.data.value.entry_type_id===1]])])]),o("div",ge,[o("table",fe,[t[12]||(t[12]=o("thead",null,[o("tr",null,[o("th",null,"Verzija / Broj vrata"),o("th",null,"Prodaja od - do"),o("th",null,[g("ccm"),o("br"),g("kW (KS)")]),o("th",null,[g("Mjenjač"),o("br"),g("Gorivo")]),o("th",null,[g("Oprema"),o("br"),g("E-kod")])])],-1)),o("tbody",null,[(U(!0),R(Z,null,L(v(s).eurotaxVersions,l=>(U(),R("tr",{key:l.id},[o("td",null,[o("input",{type:"radio",name:"version",id:`version_${l.id}`,class:"cursor-pointer",onClick:a=>r(l)},null,8,xe),o("label",{for:`version_${l.id}`,class:"text-bold position-right valign-middle cursor-pointer"},re(l.name),9,je)]),t[8]||(t[8]=o("th",null,"(09/2023 - )",-1)),t[9]||(t[9]=o("td",null,[g("999"),o("br"),g("48 (65)")],-1)),t[10]||(t[10]=o("td",null,[g(" Mehanički mjenjač / 5 "),o("br"),g(" Benzin - bezolovni ")],-1)),t[11]||(t[11]=o("td",null,[g(" oo K-ABS KF "),o("br"),g(" 386369 ")],-1))]))),128))])])])]),_:1}))}}),Ve=te(),he=I("characteristics",()=>{const V=O(!1),h=n([]),E=n([]),e=n([]),_=n([]),s=n([]),y=n([]),i=n([]),w=n([]),k=n([]),B=n([]),C=n([]),b=n([]),r=n([]),c=n([]),t=n([]),l=n([]),a=n([]),x=n([]),z=n([]),N=n([]),G=n([]),A=n([]);return{isFetchingCharacteristics:V,ageOptions:h,airbagOptions:E,autoRadioOptions:e,bodyTypeOptions:_,buyerTypeOptions:s,climateControlOptions:y,colorOptions:i,conditionOptions:w,driveTypeOptions:k,engineClassOptions:B,engineTypeOptions:C,fuelTypeOptions:b,gearboxGearsOptions:r,gearboxTypeOptions:c,ownerOptions:t,purchaseTypeOptions:l,suspensionOptions:a,tiresDiameterOptions:x,tiresHeightOptions:z,tiresWidthOptions:N,warrantyOptions:G,warrantyNewVehicleOptions:A,fetchCharacteristics:async()=>{V.value=!0;const j=S(Ve.apiBaseUrl,"v2/evaluations/frontend-options"),{data:u,error:m}=await F(j).get().json();if(m.value){console.error(m.value),V.value=!1;return}h.value=u.value.age||[],E.value=u.value.airbags||[],e.value=u.value.auto_radio||[],_.value=u.value.body_type||[],s.value=u.value.buyer_type||[],y.value=u.value.climate_control||[],i.value=u.value.color||[],w.value=u.value.condition||[],k.value=u.value.drive_type||[],B.value=u.value.engine_class||[],C.value=u.value.engine_type||[],b.value=u.value.fuel_type||[],r.value=u.value.gearbox_gears||[],c.value=u.value.gearbox_type||[],t.value=u.value.owner||[],l.value=u.value.purchase_type||[],a.value=u.value.suspension||[],x.value=u.value.tires_diameter||[],z.value=u.value.tires_height||[],N.value=u.value.tires_width||[],G.value=u.value.warranty||[],A.value=u.value.warranty_nv||[],V.value=!1}}}),Ee={class:"content"},we={class:"row"},ke={class:"col-md-4"},Be={class:"col-md-4"},Oe={class:"col-md-4"},Ce={class:"row"},ze={class:"col-md-6"},Ue={class:"col-md-6"},Me={class:"row mt-20"},Fe={class:"col-md-12 text-right"},Se="blue",$e="moneyEuroCircleFill",Ne=ee({__name:"Create",setup(V){const{t:h}=se(),E=[{name:"Rabljena vozila"},{name:"Procjena vozila",route:{name:"stock.evaluations.index"}},{name:"Nova procjena"}],e=ae(),_=he(),s=ie({entry_type_id:1,etx_category_id:10,first_registration_month:0,first_registration_year:0,etx_brand_id:0,etx_model_id:0}),y=O(null),i=$(()=>e.eurotaxVersion||{}),w=$(()=>(e.eurotaxEquipment||[]).filter(b=>b.bundle===!1)),k=$(()=>(e.eurotaxEquipment||[]).filter(b=>b.bundle===!0)),B=()=>{var b;(b=y.value)==null||b.expand()};function C(){console.log("Form submitted")}return ne(()=>{_.fetchCharacteristics()}),(b,r)=>{const c=Y("breadcrumbs"),t=Y("view-header"),l=Y("custom-button");return U(),R("div",Ee,[d(c,{items:E,class:"mb-20","with-home":!0}),d(t,{title:v(h)("stock.evaluations.title"),description:"Here you can manage brands of vehicles that are used when creating new vehicles.",icon:$e,accent:Se},null,8,["title"]),d(v(ue),{processing:v(s).processing.value,error:v(s).processingError.value,onSubmit:C},{default:q(()=>[d(ye,{ref:"entryPanel",subject:v(s),onEurotaxVersionChanged:B},null,8,["subject"]),d(K,{title:"Karakteristike vozila",collapsable:!0,collapsed:!0},{default:q(()=>[o("div",we,[o("div",ke,[d(f,{label:"Gorivo",modelValue:i.value.ch_fuel_type_id,"onUpdate:modelValue":r[0]||(r[0]=a=>i.value.ch_fuel_type_id=a),options:v(_).fuelTypeOptions,"options-value":"id","options-label":"name",editable:!1},null,8,["modelValue","options"]),d(f,{label:"Vrsta motora",modelValue:i.value.ch_engine_type_id,"onUpdate:modelValue":r[1]||(r[1]=a=>i.value.ch_engine_type_id=a),options:v(_).engineTypeOptions,"options-value":"id","options-label":"name",editable:!1},null,8,["modelValue","options"]),d(f,{label:"Klasa motora",modelValue:i.value.ch_engine_class_id,"onUpdate:modelValue":r[2]||(r[2]=a=>i.value.ch_engine_class_id=a),options:v(_).engineClassOptions,"options-value":"id","options-label":"name",editable:!1},null,8,["modelValue","options"]),d(M,{label:"Zapremina motora",modelValue:i.value.engine_volume,"onUpdate:modelValue":r[3]||(r[3]=a=>i.value.engine_volume=a),editable:!1,"addon-right":"ccm"},null,8,["modelValue"])]),o("div",Be,[d(M,{label:"Najveća snaga motora",modelValue:i.value.engine_power,"onUpdate:modelValue":r[4]||(r[4]=a=>i.value.engine_power=a),editable:!1,"addon-right":"kW"},null,8,["modelValue"]),d(M,{label:"Najveća snaga motora",modelValue:i.value.engine_power_hp,"onUpdate:modelValue":r[5]||(r[5]=a=>i.value.engine_power_hp=a),editable:!1,"addon-right":"KS"},null,8,["modelValue"]),d(f,{label:"Mjenjač",modelValue:i.value.ch_gearbox_type_id,"onUpdate:modelValue":r[6]||(r[6]=a=>i.value.ch_gearbox_type_id=a),options:v(_).gearboxTypeOptions,"options-value":"id","options-label":"name",editable:!1},null,8,["modelValue","options"]),d(f,{label:"Stupnjevi prijenosa",modelValue:i.value.ch_gearbox_gears_id,"onUpdate:modelValue":r[7]||(r[7]=a=>i.value.ch_gearbox_gears_id=a),options:v(_).gearboxGearsOptions,"options-value":"id","options-label":"name",editable:!1},null,8,["modelValue","options"])]),o("div",Oe,[d(f,{label:"Pogon",modelValue:i.value.ch_drive_type_id,"onUpdate:modelValue":r[8]||(r[8]=a=>i.value.ch_drive_type_id=a),options:v(_).driveTypeOptions,"options-value":"id","options-label":"name",editable:!1},null,8,["modelValue","options"]),d(M,{label:"Broj vrata",modelValue:i.value.doors_number,"onUpdate:modelValue":r[9]||(r[9]=a=>i.value.doors_number=a),editable:!1},null,8,["modelValue"]),d(M,{label:"Broj sjedala",modelValue:i.value.seats_number,"onUpdate:modelValue":r[10]||(r[10]=a=>i.value.seats_number=a),editable:!1},null,8,["modelValue"]),d(f,{label:"Karoserija",modelValue:i.value.ch_body_type_id,"onUpdate:modelValue":r[11]||(r[11]=a=>i.value.ch_body_type_id=a),options:v(_).bodyTypeOptions,"options-value":"id","options-label":"name",editable:!1},null,8,["modelValue","options"])])])]),_:1}),d(K,{ref_key:"equipmentPanel",ref:y,title:"Oprema vozila",collapsable:!0,collapsed:!0},{default:q(()=>[r[14]||(r[14]=o("p",{class:"text-semibold mb-20"},[o("span",{style:{color:"red"}},"Crvenom bojom"),g(" je označena oprema koja nije korištena na vozilu u cijelom razdoblju dok je odabrana verzija bila na tržištu. Molimo Vas da provjerite dali Vaše vozilo ima navedenu opremu.")],-1)),o("div",Ce,[o("div",ze,[r[12]||(r[12]=o("legend",{class:"text-semibold"},"Opcije uključene u cijenu",-1)),(U(!0),R(Z,null,L(w.value,a=>(U(),W(X,{key:a.id,label:a.title,class:Q({"text-danger":!a.not_sold_whole_period})},null,8,["label","class"]))),128))]),o("div",Ue,[r[13]||(r[13]=o("legend",{class:"text-semibold"},"Paketi opreme",-1)),(U(!0),R(Z,null,L(k.value,a=>{var x;return U(),W(X,{key:a.id,label:a.title,description:(x=a.items)==null?void 0:x.map(z=>z.title_short).join(", "),class:Q({"text-danger":a.not_sold_whole_period})},null,8,["label","description","class"])}),128))])])]),_:1},512),d(K,{title:"Vlasnik vozila",collapsable:!0,collapsed:!0}),o("div",Me,[o("div",Fe,[d(l,{appearance:"primary",submit:!0},{default:q(()=>r[15]||(r[15]=[g("Spremi procjenu")])),_:1})])])]),_:1},8,["processing","error"])])}}});export{Ne as default};
