import{d as U,r as k,P as z,m as S,z as n,f as a,G as b,o as v,e as o,c as y,h as x,t as D,B,g as s,j,b as F,Q as O,F as A,i as E,w as K}from"./vendor.js";import{u as R,_ as q,a as H,b as L}from"./StatusLabel.vue_vue_type_script_setup_true_lang.js";import{b as P,_ as T}from"./index.js";import{_ as G}from"./Modal.vue_vue_type_script_setup_true_lang.js";import{u as Q,_ as c,a as W,b as Z}from"./CheckboxField.vue_vue_type_script_setup_true_lang.js";import"./useFetch.js";const J={class:"field-list-group"},X={class:"field-list-group-item"},Y={class:"field-list-group-item"},ee={class:"field-list-group"},te={class:"field-list-group-item"},ae={class:"field-list-group-item"},oe={class:"field-list-group-item"},se={class:"field-list-group"},re={class:"field-list-group-item"},ie={class:"field-list-group-item"},de={class:"flex flex-1 items-center justify-end"},le={key:0,class:"flex-1"},ne={class:"text-grey-500"},ue={class:"text-grey-800"},me=U({__name:"ModelModal",props:{categoryId:{},brandId:{}},emits:["save"],setup(M,{expose:h,emit:w}){const d=M,V=w,m=k(),e=Q({category_id:d.categoryId,brand_id:d.brandId});z(()=>d.categoryId,()=>{e.originalData.value.category_id=d.categoryId,e.data.value.category_id=d.categoryId}),z(()=>d.brandId,()=>{e.originalData.value.brand_id=d.brandId,e.data.value.brand_id=d.brandId});const _=k();function f(i){var t,u;e.reset(),(t=m.value)==null||t.showModal(),(u=_.value)==null||u.focus(),i&&i>0&&e.fetch(`/definitions/brands/${d.brandId}/models/${i}`)}h({showModal:f,hideModal:()=>{var i;return(i=m.value)==null?void 0:i.hideModal()}});async function g(){let i=`/definitions/brands/${d.brandId}/models`;e.exists()&&(i+=`/${e.getKey()}`),await e.submit({endpoint:i,method:e.exists()?"put":"post"}),V("save")}return(i,t)=>{const u=b("custom-button");return v(),S(G,{ref_key:"modal",ref:m,width:800,"dark-body":!0,processing:a(e).processing.value},{header:n(()=>t[7]||(t[7]=[o("h4",{class:"text-bold no-margin"},"Unos / uređivanje modela",-1)])),footer:n(()=>{var r,p;return[o("div",de,[a(e).exists()?(v(),y("div",le,[o("small",ne,[t[11]||(t[11]=x("Zadnja izmjena: ")),o("span",ue,D(a(P)((r=a(e).data.value)==null?void 0:r.updated_at)),1)])])):B("",!0),s(u,{onClick:(p=m.value)==null?void 0:p.hideModal,class:"mr-10"},{default:n(()=>t[12]||(t[12]=[x("Odustani")])),_:1},8,["onClick"]),s(u,{disabled:a(e).processing.value,appearance:"primary","icon-before":"save",onClick:g,"keyboard-shortcut":{key:"S",ctrlKey:!0}},{default:n(()=>t[13]||(t[13]=[x("Spremi")])),_:1},8,["disabled"])])]}),default:n(()=>[s(a(Z),{processing:a(e).processing.value,horizontal:!0,error:a(e).processingError.value,onSubmit:g},{default:n(()=>[t[8]||(t[8]=o("h6",{class:"text-bold mt-20"},"Osnovne informacije",-1)),o("ul",J,[o("li",X,[s(c,{ref_key:"firstFormField",ref:_,label:"Naziv",required:!0,modelValue:a(e).data.value.name,"onUpdate:modelValue":t[0]||(t[0]=r=>a(e).data.value.name=r),error:a(e).errors.first("name")},null,8,["modelValue","error"])]),o("li",Y,[s(W,{label:"Aktivno",modelValue:a(e).data.value.active,"onUpdate:modelValue":t[1]||(t[1]=r=>a(e).data.value.active=r)},null,8,["modelValue"])])]),t[9]||(t[9]=o("h6",{class:"text-bold mt-20"},"Dodatne informacije",-1)),o("ul",ee,[o("li",te,[s(c,{label:"Vendor Code",numeric:"",description:"Kod modela proizvođača",modelValue:a(e).data.value.model_code,"onUpdate:modelValue":t[2]||(t[2]=r=>a(e).data.value.model_code=r),modelModifiers:{number:!0},error:a(e).errors.first("model_code")},null,8,["modelValue","error"])]),o("li",ae,[s(c,{label:"Shared ID",numeric:"",description:"Oznaka marke u Hrvatskoj bazi",required:!0,modelValue:a(e).data.value.shared_id,"onUpdate:modelValue":t[3]||(t[3]=r=>a(e).data.value.shared_id=r),modelModifiers:{number:!0},error:a(e).errors.first("shared_id")},null,8,["modelValue","error"])]),o("li",oe,[s(c,{label:"Eurotax ID",numeric:"",description:"Oznaka marke u Eurotax bazi",modelValue:a(e).data.value.eurotax_id,"onUpdate:modelValue":t[4]||(t[4]=r=>a(e).data.value.eurotax_id=r),modelModifiers:{number:!0},error:a(e).errors.first("eurotax_id")},null,8,["modelValue","error"])])]),t[10]||(t[10]=o("h6",{class:"text-bold mt-20"},"Posebne ponude",-1)),o("ul",se,[o("li",re,[s(c,{label:"Rabljena vozila",numeric:"",modelValue:a(e).data.value.eurotax_id,"onUpdate:modelValue":t[5]||(t[5]=r=>a(e).data.value.eurotax_id=r),modelModifiers:{number:!0},error:a(e).errors.first("eurotax_id")},null,8,["modelValue","error"])]),o("li",ie,[s(c,{label:"Nova vozila",numeric:"",modelValue:a(e).data.value.eurotax_id,"onUpdate:modelValue":t[6]||(t[6]=r=>a(e).data.value.eurotax_id=r),modelModifiers:{number:!0},error:a(e).errors.first("eurotax_id")},null,8,["modelValue","error"])])])]),_:1},8,["processing","error"])]),_:1},8,["processing"])}}}),ce={class:"content"},_e={class:"text-right hidden-xs"},fe={class:"text-center"},pe={class:"hidden-xs"},be={class:"hidden-xs"},ve={class:"text-nowrap"},he=["onClick"],ge={href:"#",class:"text-danger"},N="violet",Ie=U({__name:"Models",setup(M){const h=O(),w=j(()=>Number(h.params.categoryId)),d=j(()=>Number(h.params.brandId)),V={id:{label:"ID",width:50,orderable:!0,align:"right",hideOnMobile:!0},name:{label:"Name",orderable:!0,orderBy:"naziv"},active:{label:"Status",width:150,align:"center"},created_at:{label:"Created At",width:250,hideOnMobile:!0},updated_at:{label:"Updated At",width:250,hideOnMobile:!0}},m=[{key:"status",icon:"shieldStarFill",label:"Status",type:"select",options:[{label:"Aktivno",value:1},{label:"Neaktivno",value:2}]}],e=R().withURL(`definitions/brands/${d.value}/models`).withColumns(V).withFilters(m).orderBy("name","asc"),_=k([{name:"Administracija"},{name:"Unos vozila"},{name:"Marke",route:{name:"administration.definitions.brands"}}]),f=k();function g(i){var t;(t=f.value)==null||t.showModal(i)}return F(async()=>{var i,t;await e.fetch(),_.value.push({name:((t=(i=e.meta.value)==null?void 0:i.brand)==null?void 0:t.name)||"Models",route:{name:"administration.definitions.models",params:{brandId:d}}})}),(i,t)=>{var I,C;const u=b("create-button"),r=b("view-header"),p=b("timestamp"),$=b("icon");return v(),y("div",ce,[s(T,{items:_.value,class:"mb-20","with-home":!0},null,8,["items"]),s(r,{title:((C=(I=a(e).meta.value)==null?void 0:I.brand)==null?void 0:C.name)||"Models",description:"Here you can manage brands of vehicles that are used when creating new vehicles.",icon:"carWashing",accent:N},{actions:n(()=>{var l;return[s(u,{onClick:(l=f.value)==null?void 0:l.showModal,"keyboard-shortcut":{key:"N",ctrlKey:!0}},{default:n(()=>t[1]||(t[1]=[x("Dodaj model")])),_:1},8,["onClick"])]}),_:1},8,["title"]),s(a(L),{collection:a(e),"with-actions":!0,"row-height":53},{default:n(()=>[o("tbody",null,[(v(!0),y(A,null,E(a(e).items(),l=>(v(),y("tr",{key:l.id},[o("td",_e,D(l.id),1),o("td",null,[s(a(q),{route:{name:"administration.definitions.versions",params:{categoryId:l.category_id,brandId:l.brand_id,modelId:l.id}},title:l.name,"with-decoration":!0,accent:N},null,8,["route","title"])]),o("td",fe,[s(H,{model:l.active},null,8,["model"])]),o("td",pe,[s(p,{date:l.created_at},null,8,["date"])]),o("td",be,[s(p,{date:l.updated_at},null,8,["date"])]),o("td",ve,[o("a",{href:"#",class:"mr-20",onClick:K(ye=>g(l.id),["prevent"])},[s($,{icon:"edit"})],8,he),o("a",ge,[s($,{icon:"delete"})])])]))),128))])]),_:1},8,["collection"]),s(me,{ref_key:"modelModal",ref:f,"category-id":w.value,"brand-id":d.value,onSave:t[0]||(t[0]=l=>a(e).fetch())},null,8,["category-id","brand-id"])])}}});export{Ie as default};
